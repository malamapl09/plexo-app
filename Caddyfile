app.plexoapp.com {
	encode gzip zstd

	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		Referrer-Policy "strict-origin-when-cross-origin"
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
		-Server
	}

	@static path /_next/static/* /static/* /favicon.ico /logo.svg /logo-white.svg
	header @static Cache-Control "public, max-age=31536000, immutable"

	reverse_proxy web:3000
}

api.plexoapp.com {
	encode gzip zstd

	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		Referrer-Policy "strict-origin-when-cross-origin"
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
		-Server
	}

	reverse_proxy api:3000
}
